# Steam Friends List API — Анализ запросов

## Общая информация

В рамках задания мной был выбран раздел **friendslist**.
Описанный комплект операций позволяет пользователю управлять своим списком друзей на платформе Steam, а именно добавлять, просматривать, блокировать и удалять своих друзей. Прямо соответсвенно формату CRUD.

---

## Поддерживаемые операции

### 1. **Чтение списка друзей (Read)**

* **Метод**: `GET`

* **Эндпоинт**:
  `https://steamcommunity.com/profiles/{steamid}/friends`

* **Требуемые параметры**:

  * `steamid` — идентификатор пользователя (обязателен, передаётся в пути)
  * `ajax` — способ запроса (опционально, передаётся в query)

* **Тип ответа**: `text/html`

* **Описание**:
  Возвращает HTML-контент страницы друзей пользователя.

* **Особенности**:

  * Требуется авторизация через cookie (`steamLoginSecure`).
  * Ответ содержит HTML (который необходимо парсить для извлечения данных при использовании параметра ajax)

---

### 2. **Добавление друга (Create)**

* **Метод**: `POST`

* **Эндпоинт**:
  `https://steamcommunity.com/actions/AddfriendAjax`

* **Требуемые параметры (в теле запроса)**:

  * `sessionID` — идентификатор сессии пользователя
  * `steamid` — идентификатор пользователя, которого нужно добавить
  * `accept_invite` — флаг, указывающий, нужно ли принять приглашение (boolean)

* **Формат данных**: `application/x-www-form-urlencoded`

* **Тип ответа**: `application/json`

* **Ответ**:

  ```json
  {
    "invited": ["76561198000000000"],
    "success": 1
  }
  ```

* **Описание**:
  Добавляет указанного пользователя в список друзей. В ответе возвращается статус операции и список пользователей, которым отправлено приглашение.

* **Особенности**:

  * Требуется авторизация через cookie (`steamLoginSecure`).
  * В случае ошибки возвращается структура с кодами ошибок.

---

### 3. **Удаление друга (Delete)**

* **Метод**: `POST`

* **Эндпоинт**:
  `https://steamcommunity.com/actions/RemoveFriendAjax`

* **Требуемые параметры (в теле запроса)**:

  * `sessionID` — идентификатор сессии пользователя
  * `steamid` — идентификатор пользователя, которого нужно удалить

* **Формат данных**: `application/x-www-form-urlencoded`

* **Тип ответа**: `application/json`

* **Ответ**:

  ```json
  "true"
  ```

* **Описание**:
  Удаляет указанного пользователя из списка друзей. Возвращает статус операции.

* **Особенности**:

  * Требуется авторизация через cookie (`steamLoginSecure`).

---

### 4. **Блокировка пользователя (Block)**

* **Метод**: `POST`

* **Эндпоинт**:
  `https://steamcommunity.com/actions/BlockUserAjax/`

* **Требуемые параметры (в теле запроса)**:

  * `sessionID` — идентификатор сессии пользователя
  * `steamid` — идентификатор пользователя, которого нужно заблокировать
  * `block` — флаг блокировки (integer)

* **Формат данных**: `application/x-www-form-urlencoded`

* **Тип ответа**: `application/json`

* **Ответ**:

  ```json
  "true"
  ```

* **Описание**:
  Блокирует указанного пользователя. Возвращает статус завершения операции.

* **Особенности**:

  * Требуется авторизация через cookie (`steamLoginSecure`).

---

## Авторизация и безопасность

* **steamLoginSecure** — используется для авторизации через cookie.
* **sessionID** — идентификатор текущей сессии пользователя.
* **csrf-защита**: при работе с веб-интерфейсом может понадобиться заголовок `Referer`/`Origin`.

---

## Заключение

В заключении я бы хотел выделить следующие нюансы в API, которые, на мой взгляд, можно было бы улучшить:

* Странный, возможно устревший, выбор типов контента.
* Осутсвие стандартизированных кодов ошибок — вместо HTTP-кодов используются поля в теле ответа.
* В целом передача множества лишней информации
