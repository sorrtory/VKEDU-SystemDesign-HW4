#  Steam Wishlist API — Анализ запросов
##  Общая информация
В рамках задания мной был выбран раздел **wishlist**. Описанный комплект CRUD операций позволяет пользователю добавлять игры в список желаемого, просматривать его, изменять порядок и удалять игры.

---

##  Поддерживаемые операции

### 1. **Чтение (Read)**

* **Метод**: `GET`

* **Эндпоинт**:
  `https://api.steampowered.com/IWishlistService/GetWishlistSortedFiltered/v1`

* **Требуемые параметры**:

  * `access_token` — ключ авторизации пользователя (обязателен)
  * `input_protobuf_encoded` — сериализованный protobuf-запрос (в виде base64-строки)

* **Тип ответа**: `application/x-protobuf`

* **Описание**:
  Возвращает список игр, находящихся в вишлисте пользователя. Ответ приходит в формате протокол-буфера (protobuf).

* **Особенности**:

  * Требуется авторизация (OAuth или access\_token).
  * Ответ нельзя прочитать без предварительно скомпилированного .proto-файла.
  * Используется внутренняя система Steam API — `IWishlistService`.

---

### 2. **Создание (Create)**

* **Метод**: `POST`

* **Эндпоинт**:
  `https://store.steampowered.com/api/addtowishlist`

* **Требуемые гет-параметры (в теле запроса)**:

  * `sessionid` — идентификатор сессии пользователя
  * `appid` — идентификатор игры, которую нужно добавить

* **Формат данных**: `application/x-www-form-urlencoded`

* **Тип ответа**: `application/json`

* **Ответ**:

  ```json
  {
    "success": true,
    "wishlistCount": 12
  }
  ```

* **Описание**:
  Добавляет указанную игру в вишлист пользователя. В ответе возвращается общее количество игр после добавления.

* **Особенности**:

  * Используется `sessionid`, что указывает на необходимость cookie-авторизации.

---

### 3. **Удаление (Delete)**

* **Метод**: `POST`

* **Эндпоинт**:
  `https://store.steampowered.com/api/removefromwishlist`

* **Требуемые гет-параметры (в теле запроса)**:

  * `sessionid` — идентификатор сессии пользователя
  * `appid` — идентификатор игры, которую нужно удалить

* **Формат данных**: `application/x-www-form-urlencoded`

* **Тип ответа**: `application/json`

* **Ответ**:

  ```json
  {
    "success": true,
    "wishlistCount": 10
  }
  ```

* **Описание**:
  Удаляет игру из списка желаемого. Возвращает текущее количество игр после удаления.

* **Особенности**:

  * Параметры аналогичны добавлению — вероятно, используется один и тот же модуль на бэкенде.
  * Наличие авторизации через cookie.

---

### 4. **Обновление порядка (Update)**

* **Метод**: `POST`

* **Эндпоинт**:
  `https://store.steampowered.com/wishlist/action/reorder`

* **Требуемые параметры (в теле JSON-запроса)**:

  ```json
  {
    "rgApps": [
      { "appid": 123, "priority": 1 },
      { "appid": 456, "priority": 2 }
    ]
  }
  ```

* **Тип запроса**: `application/json`

* **Тип ответа**:

  ```json
  {
    "result": 1
  }
  ```

* **Описание**:
  Меняет порядок отображения игр в вишлисте, используя приоритет.


---

##  Авторизация и безопасность

* **access\_token** — требуется для официальных API (`api.steampowered.com`), передаётся в query-параметре или заголовке.
* **sessionid** — используется на `store.steampowered.com` для аутентификации через cookie.
* **csrf-защита**: при работе с веб-интерфейсом может понадобиться cookie Steam и заголовки `Referer`/`Origin`.

---

##  Заключение
В заключении я бы хотел выделить следующие нюансы в API которые мне кажется можно было бы исправить:
* Нет стандарта форматов - часть эндпоинтов использует `form-urlencoded`, другая — `json`.
* При неавторизованном доступе большинство запросов возвращают код 200 OK, но с флагом "success": false в теле ответа. Это мешает программно определять ошибки — код ответа 401 или 403 был бы удобнее.
* При этом разные эндпоинты возвращают разные структуры ({ success: true, wishlistCount: n }, { result: 1 }, protobuf).
* Read-запрос (/GetWishlistSortedFiltered/v1) использует protobuf, что затрудняет интеграцию — требуется отдельная схема и декодирование, вместо обычного JSON.